module.exports = class Data1699388449731 {
    name = 'Data1699388449731'

    async up(db) {
        await db.query(`DROP INDEX "public"."idx_block_network"`)
        await db.query(`DROP INDEX "public"."idx_block_timestamp"`)
        await db.query(`CREATE TABLE "transaction" ("id" character varying NOT NULL, "network" text NOT NULL, "block_number" integer, "block_timestamp" TIMESTAMP WITH TIME ZONE NOT NULL, "hash" text NOT NULL, "to" text, "from" text, "status" integer, CONSTRAINT "PK_89eadb93a89810556e1cbcd6ab9" PRIMARY KEY ("id"))`)
        await db.query(`CREATE INDEX "IDX_05e00879718cfc101c744472ad" ON "transaction" ("network") `)
        await db.query(`CREATE INDEX "IDX_2d99bb5a0ab5fb8cf8b746eb39" ON "transaction" ("block_number") `)
        await db.query(`CREATE INDEX "IDX_bf7f889412fc52430b609e70b4" ON "transaction" ("block_timestamp") `)
        await db.query(`CREATE INDEX "IDX_de4f0899c41c688529784bc443" ON "transaction" ("hash") `)
        await db.query(`CREATE INDEX "IDX_1713783ebe978fa2ae9654e4bb" ON "transaction" ("to") `)
        await db.query(`CREATE INDEX "IDX_290df3897fac99713afb5f3d7a" ON "transaction" ("from") `)
        await db.query(`CREATE INDEX "IDX_63f749fc7f7178ae1ad85d3b95" ON "transaction" ("status") `)
        await db.query(`CREATE TABLE "hook" ("id" character varying NOT NULL, "target" text NOT NULL, "item_index" numeric NOT NULL, "extra_data" text NOT NULL, "rental_started_id" character varying, CONSTRAINT "PK_4fae52db3090a56452a9c93e0ed" PRIMARY KEY ("id"))`)
        await db.query(`CREATE INDEX "IDX_ac938e0dcb5cf2a3d4c065bf9e" ON "hook" ("rental_started_id") `)
        await db.query(`CREATE TABLE "rental_started" ("id" character varying NOT NULL, "network" text NOT NULL, "block_number" integer NOT NULL, "block_timestamp" TIMESTAMP WITH TIME ZONE NOT NULL, "transaction_hash" text NOT NULL, "contract" text NOT NULL, "event_name" text NOT NULL, "order_hash" text NOT NULL, "emitted_extra_data" text NOT NULL, "seaport_order_hash" text NOT NULL, "lender" text NOT NULL, "renter" text NOT NULL, "rental_wallet" text NOT NULL, "end_timestamp" numeric NOT NULL, CONSTRAINT "PK_faf87a6e762298ac41e71d23305" PRIMARY KEY ("id"))`)
        await db.query(`CREATE INDEX "IDX_14e9177e65d429d530ceaa1403" ON "rental_started" ("network") `)
        await db.query(`CREATE INDEX "IDX_ea44eee22752c48a70d4270535" ON "rental_started" ("block_number") `)
        await db.query(`CREATE INDEX "IDX_42332d4df108cd754035536b86" ON "rental_started" ("block_timestamp") `)
        await db.query(`CREATE INDEX "IDX_64822ad7fcbab71a1a69229ef2" ON "rental_started" ("transaction_hash") `)
        await db.query(`CREATE INDEX "IDX_aa696c5e3c62292c681b38ac68" ON "rental_started" ("contract") `)
        await db.query(`CREATE INDEX "IDX_ed0d92af786a06a9759840b19e" ON "rental_started" ("event_name") `)
        await db.query(`CREATE INDEX "IDX_18362affd47e429be715561941" ON "rental_started" ("order_hash") `)
        await db.query(`CREATE INDEX "IDX_ab3e85185048a34496167703a5" ON "rental_started" ("seaport_order_hash") `)
        await db.query(`CREATE INDEX "IDX_683fce5ca4133a5e621dde97c6" ON "rental_started" ("lender") `)
        await db.query(`CREATE INDEX "IDX_e51dd74458dda389e80e7b84c1" ON "rental_started" ("renter") `)
        await db.query(`CREATE INDEX "IDX_bdc104b4fb84717d359d50310d" ON "rental_started" ("rental_wallet") `)
        await db.query(`CREATE TABLE "item" ("id" character varying NOT NULL, "item_type" integer NOT NULL, "settle_to" integer NOT NULL, "token" text NOT NULL, "amount" numeric NOT NULL, "identifier" numeric NOT NULL, "rental_started_id" character varying, CONSTRAINT "PK_d3c0c71f23e7adcf952a1d13423" PRIMARY KEY ("id"))`)
        await db.query(`CREATE INDEX "IDX_07863c5736eb88aed13930d15b" ON "item" ("rental_started_id") `)
        await db.query(`CREATE TABLE "rental_stopped" ("id" character varying NOT NULL, "network" text NOT NULL, "block_number" integer NOT NULL, "block_timestamp" TIMESTAMP WITH TIME ZONE NOT NULL, "transaction_hash" text NOT NULL, "contract" text NOT NULL, "event_name" text NOT NULL, "seaport_order_hash" text NOT NULL, CONSTRAINT "PK_69ed0b338e97dde15b3f378f42a" PRIMARY KEY ("id"))`)
        await db.query(`CREATE INDEX "IDX_e175d6265408f473bc5676fdc8" ON "rental_stopped" ("network") `)
        await db.query(`CREATE INDEX "IDX_6ebb4c804cc8a5c17229eb38cc" ON "rental_stopped" ("block_number") `)
        await db.query(`CREATE INDEX "IDX_aca18b14dc52c7c81e5a4acb83" ON "rental_stopped" ("block_timestamp") `)
        await db.query(`CREATE INDEX "IDX_fdd6f2675257a1754e0b593872" ON "rental_stopped" ("transaction_hash") `)
        await db.query(`CREATE INDEX "IDX_e90b25f86612c46b6b70244195" ON "rental_stopped" ("contract") `)
        await db.query(`CREATE INDEX "IDX_157a1b480e0974785b0d53399c" ON "rental_stopped" ("event_name") `)
        await db.query(`CREATE INDEX "IDX_be822c92baa622eb75e2a96d00" ON "rental_stopped" ("seaport_order_hash") `)
        await db.query(`CREATE INDEX "IDX_ea1ca207644ac464e727327c38" ON "block" ("network") `)
        await db.query(`CREATE INDEX "IDX_38414873c187a3e0c7943bc4c7" ON "block" ("number") `)
        await db.query(`CREATE INDEX "IDX_5c67cbcf4960c1a39e5fe25e87" ON "block" ("timestamp") `)
        await db.query(`ALTER TABLE "hook" ADD CONSTRAINT "FK_ac938e0dcb5cf2a3d4c065bf9eb" FOREIGN KEY ("rental_started_id") REFERENCES "rental_started"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
        await db.query(`ALTER TABLE "item" ADD CONSTRAINT "FK_07863c5736eb88aed13930d15b4" FOREIGN KEY ("rental_started_id") REFERENCES "rental_started"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
    }

    async down(db) {
        await db.query(`CREATE INDEX "idx_block_network" ON "block" ("network") `)
        await db.query(`CREATE INDEX "idx_block_timestamp" ON "block" ("timestamp") `)
        await db.query(`DROP TABLE "transaction"`)
        await db.query(`DROP INDEX "public"."IDX_05e00879718cfc101c744472ad"`)
        await db.query(`DROP INDEX "public"."IDX_2d99bb5a0ab5fb8cf8b746eb39"`)
        await db.query(`DROP INDEX "public"."IDX_bf7f889412fc52430b609e70b4"`)
        await db.query(`DROP INDEX "public"."IDX_de4f0899c41c688529784bc443"`)
        await db.query(`DROP INDEX "public"."IDX_1713783ebe978fa2ae9654e4bb"`)
        await db.query(`DROP INDEX "public"."IDX_290df3897fac99713afb5f3d7a"`)
        await db.query(`DROP INDEX "public"."IDX_63f749fc7f7178ae1ad85d3b95"`)
        await db.query(`DROP TABLE "hook"`)
        await db.query(`DROP INDEX "public"."IDX_ac938e0dcb5cf2a3d4c065bf9e"`)
        await db.query(`DROP TABLE "rental_started"`)
        await db.query(`DROP INDEX "public"."IDX_14e9177e65d429d530ceaa1403"`)
        await db.query(`DROP INDEX "public"."IDX_ea44eee22752c48a70d4270535"`)
        await db.query(`DROP INDEX "public"."IDX_42332d4df108cd754035536b86"`)
        await db.query(`DROP INDEX "public"."IDX_64822ad7fcbab71a1a69229ef2"`)
        await db.query(`DROP INDEX "public"."IDX_aa696c5e3c62292c681b38ac68"`)
        await db.query(`DROP INDEX "public"."IDX_ed0d92af786a06a9759840b19e"`)
        await db.query(`DROP INDEX "public"."IDX_18362affd47e429be715561941"`)
        await db.query(`DROP INDEX "public"."IDX_ab3e85185048a34496167703a5"`)
        await db.query(`DROP INDEX "public"."IDX_683fce5ca4133a5e621dde97c6"`)
        await db.query(`DROP INDEX "public"."IDX_e51dd74458dda389e80e7b84c1"`)
        await db.query(`DROP INDEX "public"."IDX_bdc104b4fb84717d359d50310d"`)
        await db.query(`DROP TABLE "item"`)
        await db.query(`DROP INDEX "public"."IDX_07863c5736eb88aed13930d15b"`)
        await db.query(`DROP TABLE "rental_stopped"`)
        await db.query(`DROP INDEX "public"."IDX_e175d6265408f473bc5676fdc8"`)
        await db.query(`DROP INDEX "public"."IDX_6ebb4c804cc8a5c17229eb38cc"`)
        await db.query(`DROP INDEX "public"."IDX_aca18b14dc52c7c81e5a4acb83"`)
        await db.query(`DROP INDEX "public"."IDX_fdd6f2675257a1754e0b593872"`)
        await db.query(`DROP INDEX "public"."IDX_e90b25f86612c46b6b70244195"`)
        await db.query(`DROP INDEX "public"."IDX_157a1b480e0974785b0d53399c"`)
        await db.query(`DROP INDEX "public"."IDX_be822c92baa622eb75e2a96d00"`)
        await db.query(`DROP INDEX "public"."IDX_ea1ca207644ac464e727327c38"`)
        await db.query(`DROP INDEX "public"."IDX_38414873c187a3e0c7943bc4c7"`)
        await db.query(`DROP INDEX "public"."IDX_5c67cbcf4960c1a39e5fe25e87"`)
        await db.query(`ALTER TABLE "hook" DROP CONSTRAINT "FK_ac938e0dcb5cf2a3d4c065bf9eb"`)
        await db.query(`ALTER TABLE "item" DROP CONSTRAINT "FK_07863c5736eb88aed13930d15b4"`)
    }
}
